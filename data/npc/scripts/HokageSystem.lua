-- Script Akatsuki System Advance 1.0 --
-- By RigBy --
-- Xtibia.com --
 
local keywordHandler = KeywordHandler:new()
local npcHandler = NpcHandler:new(keywordHandler)
NpcSystem.parseParameters(npcHandler)
local talkState = {}
function onCreatureAppear(cid) npcHandler:onCreatureAppear(cid) end
function onCreatureDisappear(cid) npcHandler:onCreatureDisappear(cid) end
function onCreatureSay(cid, type, msg) npcHandler:onCreatureSay(cid, type, msg) end
function onThink() npcHandler:onThink() end
 
local level = 600 -- Level preciso pra entra para akatsuki
local itemv = 1
local bonushp = 25000 -- quanto de bonus de life vai ganha
local experience = 1 -- Experience rates no caso 1x a experiencia do seu servidor.
local config = {
--[Vocation] = ( Nova Vocation, New Outfit ) 
-- naruto --
[1] = { 2022, 486},
[56] = { 2022, 486},
[57] = { 2022, 486},
[58] = { 2022, 486},
[59] = { 2022, 486},
[60] = { 2022, 486},
[1000] = { 2022, 486},
[1022] = { 2022, 486},
-- sasuke --
[2] = { 2023, 486},
[51] = { 2023, 486},
[52] = { 2023, 486},
[53] = { 2023, 486},
[54] = { 2023, 486},
[55] = { 2023, 486},
[1001] = { 2023, 486},
[1023] = { 2023, 486},
-- lee --
[3] = { 2024, 486},
[61] = { 2024, 486},
[62] = { 2024, 486},
[63] = { 2024, 486},
[64] = { 2024, 486},
[65] = { 2024, 486},
[1002] = { 2024, 486},
[1024] = { 2024, 486},
-- sakura --
[4] = { 2025, 486},
[66] = { 2025, 486},
[67] = { 2025, 486},
[68] = { 2025, 486},
[69] = { 2025, 486},
[70] = { 2025, 486},
[1003] = { 2025, 486},
[1025] = { 2025, 486},
-- shikamaru --
[5] = { 2026, 486},
[71] = { 2026, 486},
[72] = { 2026, 486},
[73] = { 2026, 486},
[74] = { 2026, 486},
[75] = { 2026, 486},
[1004] = { 2026, 486},
[1026] = { 2026, 486},
-- itachi --
[6] = { 2027, 486},
[76] = { 2027, 486},
[77] = { 2027, 486},
[78] = { 2027, 486},
[79] = { 2027, 486},
[80] = { 2027, 486},
[1005] = { 2027, 486},
[1027] = { 2027, 486},
-- kakashi --
[7] = { 2028, 486},
[81] = { 2028, 486},
[82] = { 2028, 486},
[83] = { 2028, 486},
[84] = { 2028, 486},
[85] = { 2028, 486},
[1006] = { 2028, 486},
[1028] = { 2028, 486},
-- kankuro --
[8] = { 2029, 484},
[86] = { 2029, 484},
[87] = { 2029, 484},
[88] = { 2029, 484},
[89] = { 2029, 484},
[90] = { 2029, 484},
[1007] = { 2029, 484},
[1029] = { 2029, 484},
-- gaara --
[9] = { 2030, 484},
[91] = { 2030, 484},
[92] = { 2030, 484},
[93] = { 2030, 484},
[94] = { 2030, 484},
[95] = { 2030, 484},
[1008] = { 2030, 484},
[1030] = { 2030, 484},
-- bee --
[12] = { 2031, 487},
[96] = { 2031, 487},
[97] = { 2031, 487},
[98] = { 2031, 487},
[99] = { 2031, 487},
[100] = { 2031, 487},
[1009] = { 2031, 487},
[1031] = { 2031, 487},
-- shino --
[14] = { 2032, 486},
[106] = { 2032, 486},
[107] = { 2032, 486},
[108] = { 2032, 486},
[109] = { 2032, 486},
[110] = { 2032, 486},
[1010] = { 2032, 486},
[1032] = { 2032, 486},
-- temari --
[40] = { 2033, 484},
[111] = { 2033, 484},
[112] = { 2033, 484},
[113] = { 2033, 484},
[114] = { 2033, 484},
[115] = { 2033, 484},
[1011] = { 2033, 484},
[1033] = { 2033, 484},
-- tenten --
[15] = { 2034, 486},
[116] = { 2034, 486},
[117] = { 2034, 486},
[118] = { 2034, 486},
[119] = { 2034, 486},
[120] = { 2034, 486},
[1012] = { 2034, 486},
[1034] = { 2034, 486},
-- kisame --
[16] = { 2035, 485},
[121] = { 2035, 485},
[122] = { 2035, 485},
[123] = { 2035, 485},
[124] = { 2035, 485},
[125] = { 2035, 485},
[1013] = { 2035, 485},
[1035] = { 2035, 485},
-- anbu --
[17] = { 2036, 486},
[131] = { 2036, 486},
[132] = { 2036, 486},
[133] = { 2036, 486},
[134] = { 2036, 486},
[135] = { 2036, 486},
[1013] = { 2036, 486},
[1036] = { 2036, 486},
-- chouji --
[18] = { 2037, 486},
[136] = { 2037, 486},
[137] = { 2037, 486},
[138] = { 2037, 486},
[139] = { 2037, 486},
[140] = { 2037, 486},
[1015] = { 2037, 486},
[1037] = { 2037, 486},
-- hashirama --
[19] = { 2038, 486},
[141] = { 2038, 486},
[142] = { 2038, 486},
[143] = { 2038, 486},
[144] = { 2038, 486},
[145] = { 2038, 486},
[1016] = { 2038, 486},
[1038] = { 2038, 486},
-- jiraiya --
[20] = { 2039, 486},
[126] = { 2039, 486},
[127] = { 2039, 486},
[128] = { 2039, 486},
[129] = { 2039, 486},
[130] = { 2039, 486},
[1017] = { 2039, 486},
[1039] = { 2039, 486},
-- nagato --
[21] = { 2040, 486},
[146] = { 2040, 486},
[147] = { 2040, 486},
[148] = { 2040, 486},
[149] = { 2040, 486},
[150] = { 2040, 486},
[1018] = { 2040, 486},
[1040] = { 2040, 486},
-- hinata --
[22] = { 2041, 486},
[151] = { 2041, 486},
[152] = { 2041, 486},
[153] = { 2041, 486},
[154] = { 2041, 486},
[155] = { 2041, 486},
[1019] = { 2041, 486},
[1041] = { 2041, 486},
-- konan --
[23] = { 2042, 486},
[156] = { 2042, 486},
[157] = { 2042, 486},
[158] = { 2042, 486},
[159] = { 2042, 486},
[160] = { 2042, 486},
[1020] = { 2042, 486},
[1042] = { 2042, 486},
-- madara --
[24] = { 2043, 486},
[161] = { 2043, 486},
[162] = { 2043, 486},
[163] = { 2043, 486},
[164] = { 2043, 486},
[165] = { 2043, 486},
[1021] = { 2043, 486},
[1043] = { 2043, 486},
-- sai --
[25] = { 2045, 486},
[166] = { 2045, 486},
[167] = { 2045, 486},
[168] = { 2045, 486},
[169] = { 2045, 486},
[170] = { 2045, 486},
[1044] = { 2045, 486},
[1045] = { 2045, 486},
-- minato --
[26] = { 2047, 486},
[171] = { 2047, 486},
[172] = { 2047, 486},
[173] = { 2047, 486},
[174] = { 2047, 486},
[175] = { 2047, 486},
[1046] = { 2047, 486},
[1047] = { 2047, 486},
-- obito --
[27] = { 2049, 486},
[176] = { 2049, 486},
[177] = { 2049, 486},
[178] = { 2049, 486},
[179] = { 2049, 486},
[180] = { 2049, 486},
[1048] = { 2049, 486},
[1049] = { 2049, 486},
-- deidara --
[28] = { 2051, 483},
[181] = { 2051, 483},
[182] = { 2051, 483},
[183] = { 2051, 483},
[184] = { 2051, 483},
[185] = { 2051, 483},
[1050] = { 2051, 483},
[1051] = { 2051, 483},
-- hidan --
[29] = { 2053, 486},
[186] = { 2053, 486},
[187] = { 2053, 486},
[188] = { 2053, 486},
[189] = { 2053, 486},
[190] = { 2053, 486},
[1052] = { 2053, 486},
[1053] = { 2053, 486},
-- tobirama --
[30] = { 2055, 486},
[191] = { 2055, 486},
[192] = { 2055, 486},
[193] = { 2055, 486},
[194] = { 2055, 486},
[195] = { 2055, 486},
[1054] = { 2055, 486},
[1055] = { 2055, 486},
-- orochimaru --
[31] = { 2057, 486},
[196] = { 2057, 486},
[197] = { 2057, 486},
[198] = { 2057, 486},
[199] = { 2057, 486},
[200] = { 2057, 486},
[1056] = { 2057, 486},
[1057] = { 2057, 486},
-- tsunade --
[32] = { 2059, 486},
[201] = { 2059, 486},
[202] = { 2059, 486},
[203] = { 2059, 486},
[204] = { 2059, 486},
[205] = { 2059, 486},
[1058] = { 2057, 486},
[1059] = { 2057, 486},


--[100034] = { 100035, 1434}, -- Sai
--[100044] = { 100045, 1430}, -- Killer Bee
--[100054] = { 100055, 1434}, -- Minato
--[1000104] = { 1000105, 1434}, -- Shino
--[1000114] = { 1000115, 1434}, -- Hinata
--[1000134] = { 1000135, 1434}, -- Chouji
--[1000164] = { 1000165, 1433}, -- Kankuro
--[1000174] = { 1000175, 1433}, -- Temari
--[1000184] = { 1000185, 1434}, -- Jiraya
--[1000194] = { 1000195, 1434}, -- Orochimaru
--[1000204] = { 1000205, 1434}, -- Tsunade
--[1000214] = { 1000215, 1434}, -- Tobirama
--[1000224] = { 1000225, 1434}, -- Hashirama
--[1000234] = { 1000235, 1434}, -- Madara
--[1000244] = { 1000245, 1434}, -- Hidan
--[1000254] = { 1000255, 1434}, -- Kakuzo
--[1000264] = { 1000265, 1432}, -- Deidara
--[1000274] = { 1000275, 1433}, -- Kisame
--[1000284] = { 1000285, 1434}, -- Itachi
--[1000294] = { 1000295, 1433}, -- Konan
--[1000304] = { 1000305, 1434}, -- Kimimaru
--[1000314] = { 1000315, 1434}, -- Shisui
--[1000324] = { 1000325, 1430}, -- Raikage
--[1000334] = { 1000335, 1434}, -- Kakashi
--[1000344] = { 1000345, 1434}, -- Yamato
--[1000354] = { 1000355, 1434}, -- Kabuto
--[1000364] = { 1000365, 1434}, -- Obito
--[1000374] = { 1000375, 1434}, -- Nagato
--[1000384] = { 1000385, 1432}, -- Tsuchikage FALTANDO
--[1000394] = { 1000395, 1433}, -- Suigetsu
--[1000404] = { 1000405, 1434}, -- Sarutobi
--[1000414] = { 1000415, X}, -- Boruto
--[100424] = { 100425, X}, -- Anbu
--[1000434] = { 1000435, 1433}, -- Sasori
--[100444] = { 100445, X}, -- Danzo
--[1000454] = { 1000455, 1434}, -- Menma
--[100464] = { 100465, X}, -- Mitsuki
--[100474] = { 100475, X}, -- Indra

------------------------------ > QUEM ERA AKAT PODER ENTRAR AKAT

}
function creatureSayCallback(cid, type, msg)
if(not npcHandler:isFocused(cid)) then
 return false
end
 
local talkUser = NPCHANDLER_CONVBEHAVIOR == CONVERSATION_DEFAULT and 0 or cid
 
 
if msgcontains(msg, 'hokage') then
    if getPlayerVocation(cid) ~= config then
        if getPlayerStorageValue(cid, 82717) == -1 then
            if getPlayerLevel(cid) >= level then
                selfSay('Você deseja se tornar Kage ? {sim}', cid)
                talkState[talkUser] = 1
            else
                selfSay('Você não possui level suficiente para realizar essa missão.', cid)
            end
        else
            selfSay('Você já é um Kage.', cid)
        end
    else
        selfSay('Não preciso de você por enquanto.', cid)
    end
end
 
if talkState[talkUser] == 1 and msgcontains(msg, 'sim') then
    selfSay('Calma ! Antes você precisará da permissão de cada um dos Hokages e 100x Crystal of Victory Essence ! {pronto}', cid)
    talkState[talkUser] = 2
end
 
if talkState[talkUser] == 2 and msgcontains(msg, 'pronto') then
    if getPlayerStorageValue(cid, 83357) >= 5 then
		if(getPlayerItemCount(cid, 11329) >= 100) then
			local voc = config[getPlayerVocation(cid)]
			doPlayerSetVocation(cid, voc[1])
			local outfit = {lookType = voc[2]}
			doCreatureChangeOutfit(cid, outfit)
			setCreatureMaxHealth(cid, getCreatureMaxHealth(cid)+bonushp)
			doCreatureAddHealth(cid, getCreatureMaxHealth(cid))
			setPlayerStorageValue(cid,82717,1)
			doPlayerRemoveItem(cid, 11329, 100)
			setPlayerStorageValue(cid,89455,1)
			doPlayerSetExperienceRate(cid, experience) 
			doPlayerPopupFYI(cid, "Parabéns, você se tornou Kage.")
			talkState[talkUser] = 0
		else
        selfSay('Vejo que você não tem 100 Victory Essence.', cid)
		end
    else
        selfSay('Vejo que não conseguiu a permissão de todos os hokages.', cid)
    end
end
return true
end
npcHandler:setCallback(CALLBACK_MESSAGE_DEFAULT, creatureSayCallback)
npcHandler:addModule(FocusModule:new())